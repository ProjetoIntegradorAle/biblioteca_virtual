{% extends 'base.html' %}
{% load static %}
{% load crispy_forms_tags %}
{% block title %}Avaliações Recebidas{% endblock %}

{% block content %}
<h1 style="margin-bottom: 50px; padding: 0px 0px;">
    <a class="icon-brand">
        Avaliações Recebidas
    </a>
</h1>
<hr style="margin-top: 2rem; padding-top: 1rem; border-top: 1px solid rgba(255, 255, 255, 0.6);">

<div class="avalia-receb">
{% for material in materiais %}
  {% if material.comentarios.exists or material.curtidas.exists %}
    <div class="avalia-receb-item">
      <strong>Título: {{ material.titulo }}</strong>
      {% if material.comentarios.exists %}
        <h5>Comentários:</h5>
        {% for comentario in material.comentarios.all %}
            <div class="alert alert-secondary">
              <strong>{{ comentario.autor }}:</strong> {{ comentario.texto }}
            </div>
        {% endfor %}
      {% endif %}

      {% if material.curtidas.exists %}
        <h5>Curtidas:</h5>
        <ul>
            {% for usuario in material.curtidas.all %}
            <li>❤️ {{ usuario.username }}</li>
            {% endfor %}
        </ul>
      {% endif %}
    </div>
  {% endif %}
{% empty %}
  <p>Você ainda não recebeu comentários ou curtidas.</p>
{% endfor %}
</div>

{% endblock %}