{% extends 'base.html' %}
{% load static %}
{% load crispy_forms_tags %}

{% block title %}Avaliações Recebidas{% endblock %}
{% block content %}
<h2 style="color: white; font-family: 'Georgia'">Avaliações Recebidas:</h2>

{% for material in materiais %}
  {% if material.comentarios.exists or material.curtidas.exists %}
    <div class="card mt-4">
        <div class="card-header">
            <strong>{{ material.titulo }}</strong>
        </div>
        <div class="card-body">
            {% if material.comentarios.exists %}
            <h5>Comentários:</h5>
            {% for comentario in material.comentarios.all %}
                <div class="alert alert-secondary">
                <strong>{{ comentario.autor }}:</strong> {{ comentario.texto }}
                </div>
            {% endfor %}
            {% endif %}

            {% if material.curtidas.exists %}
            <h5 class="mt-3">Curtidas:</h5>
            <ul>
                {% for usuario in material.curtidas.all %}
                <li>❤️ {{ usuario.username }}</li>
                {% endfor %}
            </ul>
            {% endif %}
        </div>
    </div>
  {% endif %}
{% empty %}
  <p>Você ainda não recebeu comentários ou curtidas.</p>
{% endfor %}
{% endblock %}