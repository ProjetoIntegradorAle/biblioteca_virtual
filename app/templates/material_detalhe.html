{% extends "base.html" %}
{% load crispy_forms_tags %}

{% block content %}
<h4>Avaliações e Comentários</h4>
<p>Esses recursos estarão disponíveis após salvar o material.</p>

<button disabled class="btn btn-secondary">Curtir</button>
<button disabled class="btn btn-secondary">Comentar</button>

{% if material.avaliacoes_habilitadas %}
    <form method="POST" action="{% url 'comentar' material.id %}">
        {% csrf_token %}
        <textarea name="comentario" placeholder="Deixe seu comentário"></textarea>
        <button type="submit">Enviar</button>
    </form>

    {% for comentario in material.comentarios.all %}
        <p>{{ comentario.autor }}: {{ comentario.texto }}</p>
        <form method="POST" action="{% url 'curtir_comentario' comentario.id %}">
            {% csrf_token %}
            <button type="submit" class="btn btn-heart">❤️ {{ comentario.curtidas.count }}</button>
        </form>
    {% endfor %}
{% endif %}

{% endblock %}
